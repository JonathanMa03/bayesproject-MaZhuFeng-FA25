---
title: "Posterior Summary"
author: "Jonathan Ma"
date: "`r Sys.Date()`"
output:
  word_document:
    toc: true
    number_sections: true
---

\newpage

# Diagnostics

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE, fig.width=6, fig.height=4)
breast <- readRDS("../R/breast_model.rds")
seer_df2 <- read.csv("../data/clean/seer_df2.csv", sep = ",", header = TRUE, stringsAsFactors = TRUE)
library(bayesplot)
library(rstan)
```

Model is loaded from an RDS object in the repository, so you dont have to wait a long time for it to run.

## Convergence and Efficienct

```{r Summary}
summary(breast)
```

We see no scale reduction (Rhat=1.0 in all cases) and ESS are all sufficiently large, and 1 divergent transition, but its small enough to be due to chance.

## VIF

We check VIF, and confirm all values are reasonable.

```{r VIF}
car::vif(lm(latestage ~ age + sex + raceth + grade + size_z + year_z + marry, data = seer_df2))
```

## Posterior Draws

Checking Posterior Draws

```{r PP Draws, echo=TRUE}
pp_check(breast, ndraws = 100)
```

Posterior draws look Ok as well.